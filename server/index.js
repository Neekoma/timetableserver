const a0_0x2aba=['Ошибка\x20нет\x20db.json\x20или\x20он\x20пуст','1034358tqCpVH','register','/api/groups/:id','teacher','0.0.0.0','6fwAgVR','/api/date','get','parse','db.json','907320swwQei','query','198700FMAoHa','bad\x20token','log','3373cAkTmR','listen','utf8','body','8080','stringify','Error\x20starting\x20server:','token','/api/db/checkToken','fastify-static','public','push','includes','lessons','post','groups','join','fastify-helmet','/api/groups','exit','writeFile','catch','send','1CBiMho','/api/db','91ECzaTn','648623YiERAl','only','VALD_TOKEN','then','30434VdstKO','readFileSync','path','sendFile','success','bad\x20request','code','teachers','time_table','params','306552VkcTCp','fastify'];const a0_0x3670=function(_0x78ee19,_0xebe04d){_0x78ee19=_0x78ee19-0xac;let _0x2aba8e=a0_0x2aba[_0x78ee19];return _0x2aba8e;};const a0_0x245c33=a0_0x3670;(function(_0x199230,_0x1cb2a9){const _0x5e61fe=a0_0x3670;while(!![]){try{const _0x8be274=parseInt(_0x5e61fe(0xb7))+-parseInt(_0x5e61fe(0xad))+-parseInt(_0x5e61fe(0xe4))+parseInt(_0x5e61fe(0xd6))*parseInt(_0x5e61fe(0xd3))+parseInt(_0x5e61fe(0xb9))+parseInt(_0x5e61fe(0xda))*-parseInt(_0x5e61fe(0xb2))+-parseInt(_0x5e61fe(0xd5))*-parseInt(_0x5e61fe(0xbc));if(_0x8be274===_0x1cb2a9)break;else _0x199230['push'](_0x199230['shift']());}catch(_0x3c9611){_0x199230['push'](_0x199230['shift']());}}}(a0_0x2aba,0x835d8));const fastify=require(a0_0x245c33(0xe5))({'logger':![],'ignoreTrailingSlash':!![]}),helmet=require(a0_0x245c33(0xcd)),fs=require('fs'),path=require(a0_0x245c33(0xdc));function getGroupsList(){all_groups=[];for(let _0x2bf340 in db['time_table']){all_groups['push'](_0x2bf340);}}function getTeachersList(){const _0x4eff33=a0_0x245c33;all_teachers=[];for(let _0x851343 in db[_0x4eff33(0xe2)]){for(let _0x3170ef in db['time_table'][_0x851343]){for(let _0x21539f of db[_0x4eff33(0xe2)][_0x851343][_0x3170ef]){for(let _0x239a81 of _0x21539f[_0x4eff33(0xc9)]){if(_0x239a81[_0x4eff33(0xb0)]!==''&&!all_teachers[_0x4eff33(0xc8)](_0x239a81[_0x4eff33(0xb0)]))all_teachers[_0x4eff33(0xc7)](_0x239a81[_0x4eff33(0xb0)]);}}}}}var all_groups=null,all_teachers=null;let db=null;const settings={'ip':a0_0x245c33(0xb1),'port':a0_0x245c33(0xc0),'token':a0_0x245c33(0xd8)};try{db=JSON[a0_0x245c33(0xb5)](fs[a0_0x245c33(0xdb)](a0_0x245c33(0xb6),a0_0x245c33(0xbe)));}catch(a0_0x4a8794){console['error'](a0_0x245c33(0xac));return;}getGroupsList(),getTeachersList(),fastify['register'](require(a0_0x245c33(0xc5)),{'root':path[a0_0x245c33(0xcc)](__dirname,a0_0x245c33(0xc6)),'prefix':'/'}),fastify[a0_0x245c33(0xae)](helmet),fastify[a0_0x245c33(0xb4)]('/',(_0x4c0a03,_0x52428e)=>{const _0x65b8ca=a0_0x245c33;_0x52428e[_0x65b8ca(0xdd)]('index.html');}),fastify[a0_0x245c33(0xb4)](a0_0x245c33(0xb3),async(_0x50756d,_0x1d6e92)=>{return parseInt(new Date()['getTime']()/0x3e8);}),fastify[a0_0x245c33(0xb4)](a0_0x245c33(0xce),async(_0x8cd37f,_0x320169)=>{const _0x235f5b=a0_0x245c33;if(_0x8cd37f['query']['only']===_0x235f5b(0xcb))return all_groups;else{if(_0x8cd37f[_0x235f5b(0xb8)][_0x235f5b(0xd7)]===_0x235f5b(0xe1))return all_teachers;}return db[_0x235f5b(0xe2)];}),fastify[a0_0x245c33(0xb4)](a0_0x245c33(0xaf),async(_0x220bdb,_0x25ad8b)=>{const _0x4dd945=a0_0x245c33;let _0x1b67f7=_0x220bdb[_0x4dd945(0xe3)]['id'];if(_0x1b67f7 in db[_0x4dd945(0xe2)])return db['time_table'][_0x1b67f7];else _0x25ad8b[_0x4dd945(0xe0)](0x194)[_0x4dd945(0xd2)]({'status':0x194,'message':'group\x20not\x20found'});}),fastify['post'](a0_0x245c33(0xd4),(_0x10c9ed,_0x32ba74)=>{const _0x264187=a0_0x245c33;if('token'in _0x10c9ed['body']&&'time_table'in _0x10c9ed['body'])_0x10c9ed[_0x264187(0xbf)][_0x264187(0xc3)]===settings[_0x264187(0xc3)]?(db[_0x264187(0xe2)]=_0x10c9ed[_0x264187(0xbf)][_0x264187(0xe2)],getGroupsList(),getTeachersList(),fs[_0x264187(0xd0)](_0x264187(0xb6),JSON[_0x264187(0xc1)](db),function(_0x1daa82){const _0x200acc=_0x264187;if(_0x1daa82)throw _0x1daa82;_0x32ba74[_0x200acc(0xd2)]({'status':0xc8,'message':_0x200acc(0xde)});})):_0x32ba74[_0x264187(0xe0)](0x193)[_0x264187(0xd2)]({'status':0x193,'message':_0x264187(0xba)});else _0x32ba74[_0x264187(0xe0)](0x190)[_0x264187(0xd2)]({'status':0x190,'message':_0x264187(0xdf)});}),fastify[a0_0x245c33(0xca)](a0_0x245c33(0xc4),async(_0x553afb,_0xaf8aaf)=>{const _0x14c461=a0_0x245c33;if(_0x553afb[_0x14c461(0xbf)]['token']===settings[_0x14c461(0xc3)])return{'status':0xc8,'message':_0x14c461(0xde)};else _0xaf8aaf[_0x14c461(0xe0)](0x193)[_0x14c461(0xd2)]({'status':0x193,'message':_0x14c461(0xba)});}),fastify[a0_0x245c33(0xbd)](settings['port'],settings['ip'])[a0_0x245c33(0xd9)](_0x4dfbae=>console[a0_0x245c33(0xbb)]('Server\x20start\x20on\x20'+_0x4dfbae))[a0_0x245c33(0xd1)](_0x2ad205=>{const _0x2c0d57=a0_0x245c33;console[_0x2c0d57(0xbb)](_0x2c0d57(0xc2),_0x2ad205),process[_0x2c0d57(0xcf)](0x1);});